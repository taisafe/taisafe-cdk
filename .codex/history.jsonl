{"session_id":"019a5a3d-eb2c-76d2-a732-3da921920c2a","ts":1762450642,"text":"\n# Claude Command: Commit (Git-only)\n\nè¯¥å‘½ä»¤åœ¨**ä¸ä¾èµ–ä»»ä½•åŒ…ç®¡ç†å™¨/æ„å»ºå·¥å…·**çš„å‰æä¸‹ï¼Œä»…é€šè¿‡ **Git**ï¼š\n\n- è¯»å–æ”¹åŠ¨ï¼ˆstaged/unstagedï¼‰\n- åˆ¤æ–­æ˜¯å¦éœ€è¦**æ‹†åˆ†ä¸ºå¤šæ¬¡æäº¤**\n- ä¸ºæ¯ä¸ªæäº¤ç”Ÿæˆ **Conventional Commits** é£æ ¼çš„ä¿¡æ¯ï¼ˆå¯é€‰ emojiï¼‰\n- æŒ‰éœ€æ‰§è¡Œ `git add` ä¸ `git commit`ï¼ˆé»˜è®¤è¿è¡Œæœ¬åœ° Git é’©å­ï¼›å¯ `--no-verify` è·³è¿‡ï¼‰\n\n---\n\n## Usage\n\n```bash\n/git-commit\n/git-commit --no-verify\n/git-commit --emoji\n/git-commit --all --signoff\n/git-commit --amend\n/git-commit --scope ui --type feat --emoji\n```\n\n### Options\n\n- `--no-verify`ï¼šè·³è¿‡æœ¬åœ° Git é’©å­ï¼ˆ`pre-commit`/`commit-msg` ç­‰ï¼‰ã€‚\n- `--all`ï¼šå½“æš‚å­˜åŒºä¸ºç©ºæ—¶ï¼Œè‡ªåŠ¨ `git add -A` å°†æ‰€æœ‰æ”¹åŠ¨çº³å…¥æœ¬æ¬¡æäº¤ã€‚\n- `--amend`ï¼šåœ¨ä¸åˆ›å»ºæ–°æäº¤çš„æƒ…å†µä¸‹**ä¿®è¡¥**ä¸Šä¸€æ¬¡æäº¤ï¼ˆä¿æŒæäº¤ä½œè€…ä¸æ—¶é—´ï¼Œé™¤éæœ¬åœ° Git é…ç½®å¦æœ‰æŒ‡å®šï¼‰ã€‚\n- `--signoff`ï¼šé™„åŠ  `Signed-off-by` è¡Œï¼ˆéµå¾ª DCO æµç¨‹æ—¶ä½¿ç”¨ï¼‰ã€‚\n- `--emoji`ï¼šåœ¨æäº¤ä¿¡æ¯ä¸­åŒ…å« emoji å‰ç¼€ï¼ˆçœç•¥åˆ™ä½¿ç”¨çº¯æ–‡æœ¬ï¼‰ã€‚\n- `--scope <scope>`ï¼šæŒ‡å®šæäº¤ä½œç”¨åŸŸï¼ˆå¦‚ `ui`ã€`docs`ã€`api`ï¼‰ï¼Œå†™å…¥æ¶ˆæ¯å¤´éƒ¨ã€‚\n- `--type <type>`ï¼šå¼ºåˆ¶æäº¤ç±»å‹ï¼ˆå¦‚ `feat`ã€`fix`ã€`docs` ç­‰ï¼‰ï¼Œè¦†ç›–è‡ªåŠ¨åˆ¤æ–­ã€‚\n\n> æ³¨ï¼šå¦‚æ¡†æ¶ä¸æ”¯æŒäº¤äº’å¼ç¡®è®¤ï¼Œå¯åœ¨ front-matter ä¸­å¼€å¯ `confirm: true` ä»¥é¿å…è¯¯æ“ä½œã€‚\n\n---\n\n## What This Command Does\n\n1. **ä»“åº“/åˆ†æ”¯æ ¡éªŒ**\n   - é€šè¿‡ `git rev-parse --is-inside-work-tree` åˆ¤æ–­æ˜¯å¦ä½äº Git ä»“åº“ã€‚\n   - è¯»å–å½“å‰åˆ†æ”¯/HEAD çŠ¶æ€ï¼›å¦‚å¤„äº rebase/merge å†²çªçŠ¶æ€ï¼Œå…ˆæç¤ºå¤„ç†å†²çªåå†ç»§ç»­ã€‚\n\n2. **æ”¹åŠ¨æ£€æµ‹**\n   - ç”¨ `git status --porcelain` ä¸ `git diff` è·å–å·²æš‚å­˜ä¸æœªæš‚å­˜çš„æ”¹åŠ¨ã€‚\n   - è‹¥å·²æš‚å­˜æ–‡ä»¶ä¸º 0ï¼š\n     - è‹¥ä¼ å…¥ `--all` â†’ æ‰§è¡Œ `git add -A`ã€‚\n     - å¦åˆ™æç¤ºä½ é€‰æ‹©ï¼šç»§ç»­ä»…åˆ†ææœªæš‚å­˜æ”¹åŠ¨å¹¶ç»™å‡º**å»ºè®®**ï¼Œæˆ–å–æ¶ˆå‘½ä»¤åæ‰‹åŠ¨åˆ†ç»„æš‚å­˜ã€‚\n\n3. **æ‹†åˆ†å»ºè®®ï¼ˆSplit Heuristicsï¼‰**\n   - æŒ‰**å…³æ³¨ç‚¹**ã€**æ–‡ä»¶æ¨¡å¼**ã€**æ”¹åŠ¨ç±»å‹**èšç±»ï¼ˆç¤ºä¾‹ï¼šæºä»£ç  vs æ–‡æ¡£ã€æµ‹è¯•ï¼›ä¸åŒç›®å½•/åŒ…ï¼›æ–°å¢ vs åˆ é™¤ï¼‰ã€‚\n   - è‹¥æ£€æµ‹åˆ°**å¤šç»„ç‹¬ç«‹å˜æ›´**æˆ– diff è§„æ¨¡è¿‡å¤§ï¼ˆå¦‚ > 300 è¡Œ / è·¨å¤šä¸ªé¡¶çº§ç›®å½•ï¼‰ï¼Œå»ºè®®æ‹†åˆ†æäº¤ï¼Œå¹¶ç»™å‡ºæ¯ä¸€ç»„çš„ pathspecï¼ˆä¾¿äºåç»­æ‰§è¡Œ `git add <paths>`ï¼‰ã€‚\n\n4. **æäº¤ä¿¡æ¯ç”Ÿæˆï¼ˆConventional è§„èŒƒï¼Œå¯é€‰ Emojiï¼‰**\n   - è‡ªåŠ¨æ¨æ–­ `type`ï¼ˆ`feat`/`fix`/`docs`/`refactor`/`test`/`chore`/`perf`/`style`/`ci`/`revert` â€¦ï¼‰ä¸å¯é€‰ `scope`ã€‚\n   - ç”Ÿæˆæ¶ˆæ¯å¤´ï¼š`[<emoji>] <type>(<scope>)?: <subject>`ï¼ˆé¦–è¡Œ â‰¤ 72 å­—ç¬¦ï¼Œç¥ˆä½¿è¯­æ°”ï¼Œä»…åœ¨ä½¿ç”¨ `--emoji` æ—¶åŒ…å« emojiï¼‰ã€‚\n   - ç”Ÿæˆæ¶ˆæ¯ä½“ï¼šè¦ç‚¹åˆ—è¡¨ï¼ˆåŠ¨æœºã€å®ç°è¦ç‚¹ã€å½±å“èŒƒå›´ã€BREAKING CHANGE å¦‚æœ‰ï¼‰ã€‚\n   - æ ¹æ® Git å†å²æäº¤çš„ä¸»è¦è¯­è¨€é€‰æ‹©æäº¤ä¿¡æ¯è¯­è¨€ã€‚ä¼˜å…ˆæ£€æŸ¥æœ€è¿‘æäº¤ä¸»é¢˜ï¼ˆä¾‹å¦‚ `git log -n 50 --pretty=%s`ï¼‰åˆ¤æ–­ä¸­æ–‡/è‹±æ–‡ï¼›è‹¥æ— æ³•åˆ¤æ–­ï¼Œåˆ™å›é€€åˆ°ä»“åº“ä¸»è¦è¯­è¨€æˆ–è‹±æ–‡ã€‚\n   - å°†è‰ç¨¿å†™å…¥ `.git/COMMIT_EDITMSG`ï¼Œå¹¶ç”¨äº `git commit`ã€‚\n\n5. **æ‰§è¡Œæäº¤**\n   - å•æäº¤åœºæ™¯ï¼š`git commit [-S] [--no-verify] [-s] -F .git/COMMIT_EDITMSG`\n   - å¤šæäº¤åœºæ™¯ï¼ˆå¦‚æ¥å—æ‹†åˆ†å»ºè®®ï¼‰ï¼šæŒ‰åˆ†ç»„ç»™å‡º `git add <paths> && git commit ...` çš„æ˜ç¡®æŒ‡ä»¤ï¼›è‹¥å…è®¸æ‰§è¡Œåˆ™é€ä¸€å®Œæˆã€‚\n\n6. **å®‰å…¨å›æ»š**\n   - å¦‚è¯¯æš‚å­˜ï¼Œå¯ç”¨ `git restore --staged <paths>` æ’¤å›æš‚å­˜ï¼ˆå‘½ä»¤ä¼šç»™å‡ºæŒ‡ä»¤ï¼Œä¸ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼‰ã€‚\n\n---\n\n## Best Practices for Commits\n\n- **Atomic commits**ï¼šä¸€æ¬¡æäº¤åªåšä¸€ä»¶äº‹ï¼Œä¾¿äºå›æº¯ä¸å®¡é˜…ã€‚\n- **å…ˆåˆ†ç»„å†æäº¤**ï¼šæŒ‰ç›®å½•/æ¨¡å—/åŠŸèƒ½ç‚¹æ‹†åˆ†ã€‚\n- **æ¸…æ™°ä¸»é¢˜**ï¼šé¦–è¡Œ â‰¤ 72 å­—ç¬¦ï¼Œç¥ˆä½¿è¯­æ°”ï¼ˆå¦‚ â€œaddâ€¦ / fixâ€¦â€ï¼‰ã€‚\n- **æ­£æ–‡å«ä¸Šä¸‹æ–‡**ï¼šè¯´æ˜åŠ¨æœºã€æ–¹æ¡ˆã€å½±å“èŒƒå›´ã€é£é™©ä¸åç»­å·¥ä½œã€‚\n- **éµå¾ª Conventional Commits**ï¼š`<type>(<scope>): <subject>`ã€‚\n\n---\n\n## Type ä¸ Emoji æ˜ å°„ï¼ˆä½¿ç”¨ --emoji æ—¶ï¼‰\n\n- âœ¨ `feat`ï¼šæ–°å¢åŠŸèƒ½\n- ğŸ› `fix`ï¼šç¼ºé™·ä¿®å¤ï¼ˆå« ğŸ”¥ åˆ é™¤ä»£ç /æ–‡ä»¶ã€ğŸš‘ï¸ ç´§æ€¥ä¿®å¤ã€ğŸ‘½ï¸ é€‚é…å¤–éƒ¨ API å˜æ›´ã€ğŸ”’ï¸ å®‰å…¨ä¿®å¤ã€ğŸš¨ è§£å†³å‘Šè­¦ã€ğŸ’š ä¿®å¤ CIï¼‰\n- ğŸ“ `docs`ï¼šæ–‡æ¡£ä¸æ³¨é‡Š\n- ğŸ¨ `style`ï¼šé£æ ¼/æ ¼å¼ï¼ˆä¸æ”¹è¯­ä¹‰ï¼‰\n- â™»ï¸ `refactor`ï¼šé‡æ„ï¼ˆä¸æ–°å¢åŠŸèƒ½ã€ä¸ä¿®ç¼ºé™·ï¼‰\n- âš¡ï¸ `perf`ï¼šæ€§èƒ½ä¼˜åŒ–\n- âœ… `test`ï¼šæ–°å¢/ä¿®å¤æµ‹è¯•ã€å¿«ç…§\n- ğŸ”§ `chore`ï¼šæ„å»º/å·¥å…·/æ‚åŠ¡ï¼ˆåˆå¹¶åˆ†æ”¯ã€æ›´æ–°é…ç½®ã€å‘å¸ƒæ ‡è®°ã€ä¾èµ– pinã€.gitignore ç­‰ï¼‰\n- ğŸ‘· `ci`ï¼šCI/CD é…ç½®ä¸è„šæœ¬\n- âªï¸ `revert`ï¼šå›æ»šæäº¤\n- ğŸ’¥ `feat`ï¼šç ´åæ€§å˜æ›´ï¼ˆ`BREAKING CHANGE:` æ®µè½ä¸­è¯´æ˜ï¼‰\n\n> è‹¥ä¼ å…¥ `--type`/`--scope`ï¼Œå°†**è¦†ç›–**è‡ªåŠ¨æ¨æ–­ã€‚\n> ä»…åœ¨æŒ‡å®š `--emoji` æ ‡å¿—æ—¶æ‰ä¼šåŒ…å« emojiã€‚\n\n---\n\n## Guidelines for Splitting Commits\n\n1. **ä¸åŒå…³æ³¨ç‚¹**ï¼šäº’ä¸ç›¸å…³çš„åŠŸèƒ½/æ¨¡å—æ”¹åŠ¨åº”æ‹†åˆ†ã€‚\n2. **ä¸åŒç±»å‹**ï¼šä¸è¦å°† `feat`ã€`fix`ã€`refactor` æ··åœ¨åŒä¸€æäº¤ã€‚\n3. **æ–‡ä»¶æ¨¡å¼**ï¼šæºä»£ç  vs æ–‡æ¡£/æµ‹è¯•/é…ç½®åˆ†ç»„æäº¤ã€‚\n4. **è§„æ¨¡é˜ˆå€¼**ï¼šè¶…å¤§ diffï¼ˆç¤ºä¾‹ï¼š>300 è¡Œæˆ–è·¨å¤šä¸ªé¡¶çº§ç›®å½•ï¼‰å»ºè®®æ‹†åˆ†ã€‚\n5. **å¯å›æ»šæ€§**ï¼šç¡®ä¿æ¯ä¸ªæäº¤å¯ç‹¬ç«‹å›é€€ã€‚\n\n---\n\n## Examples\n\n**Good (ä½¿ç”¨ --emoji)**\n\n- âœ¨ feat(ui): add user authentication flow\n- ğŸ› fix(api): handle token refresh race condition\n- ğŸ“ docs: update API usage examples\n- â™»ï¸ refactor(core): extract retry logic into helper\n- âœ… test: add unit tests for rate limiter\n- ğŸ”§ chore: update git hooks and repository settings\n- âªï¸ revert: revert \"feat(core): introduce streaming API\"\n\n**Good (ä¸ä½¿ç”¨ --emoji)**\n\n- feat(ui): add user authentication flow\n- fix(api): handle token refresh race condition\n- docs: update API usage examples\n- refactor(core): extract retry logic into helper\n- test: add unit tests for rate limiter\n- chore: update git hooks and repository settings\n- revert: revert \"feat(core): introduce streaming API\"\n\n**Split Example**\n\n- `feat(types): add new type defs for payment method`\n- `docs: update API docs for new types`\n- `test: add unit tests for payment types`\n- `fix: address linter warnings in new files` â†ï¼ˆå¦‚ä½ çš„ä»“åº“æœ‰é’©å­æŠ¥é”™ï¼‰\n\n---\n\n## Important Notes\n\n- **ä»…ä½¿ç”¨ Git**ï¼šä¸è°ƒç”¨ä»»ä½•åŒ…ç®¡ç†å™¨/æ„å»ºå‘½ä»¤ï¼ˆæ—  `pnpm`/`npm`/`yarn` ç­‰ï¼‰ã€‚\n- **å°Šé‡é’©å­**ï¼šé»˜è®¤æ‰§è¡Œæœ¬åœ° Git é’©å­ï¼›ä½¿ç”¨ `--no-verify` å¯è·³è¿‡ã€‚\n- **ä¸æ”¹æºç å†…å®¹**ï¼šå‘½ä»¤åªè¯»å†™ `.git/COMMIT_EDITMSG` ä¸æš‚å­˜åŒºï¼›ä¸ä¼šç›´æ¥ç¼–è¾‘å·¥ä½œåŒºæ–‡ä»¶ã€‚\n- **å®‰å…¨æç¤º**ï¼šåœ¨ rebase/merge å†²çªã€detached HEAD ç­‰çŠ¶æ€ä¸‹ä¼šå…ˆæç¤ºå¤„ç†/ç¡®è®¤å†ç»§ç»­ã€‚\n- **å¯å®¡å¯æ§**ï¼šå¦‚å¼€å¯ `confirm: true`ï¼Œæ¯ä¸ªå®é™… `git add`/`git commit` æ­¥éª¤éƒ½ä¼šè¿›è¡ŒäºŒæ¬¡ç¡®è®¤ã€‚\n"}
{"session_id":"019a5a3d-eb2c-76d2-a732-3da921920c2a","ts":1762450682,"text":"ghä¸Šå‚³"}
{"session_id":"019a5a3d-eb2c-76d2-a732-3da921920c2a","ts":1762450703,"text":"2"}
{"session_id":"019a5a3d-eb2c-76d2-a732-3da921920c2a","ts":1762450722,"text":"æ˜¯"}
{"session_id":"019a5a3d-eb2c-76d2-a732-3da921920c2a","ts":1762450804,"text":"ghä¸Šå‚³"}
{"session_id":"019a5a3d-eb2c-76d2-a732-3da921920c2a","ts":1762450840,"text":"æ˜¯"}
